{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<div class="container py-5">
  <div id="topUser" class="card text-center mb-4 shadow-sm">
    <div class="card-body">
      <h5 class="card-title">Loading top user...</h5>
      <p class="card-text text-muted">Please wait while we fetch user data.</p>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-header bg-light">
      <h5 class="mb-0">All Registered Users</h5>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table id="userTable" class="table table-hover align-middle">
          <thead class="table-primary">
            <tr>
              <th>Name</th>
              <th>Status</th>
              <th>Points</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
const users = [
  { name: "Alice", status: "child", points: 240 },
  { name: "Bob", status: "adult", points: 180 },
  { name: "Liam", status: "child", points: 290 },
  { name: "Emma", status: "child", points: 150 },
];

users.sort((a, b) => b.points - a.points);
const topUser = users[0];

document.getElementById("topUser").innerHTML = `
  <div class="card-body">
    <h3 class="card-title">üèÜ ${topUser.name}</h3>
    <p>Status: <span>${topUser.status}</span></p>
    <p><strong>${topUser.points}</strong> points</p>
  </div>`;

const tbody = document.querySelector("#userTable tbody");
users.forEach(user => {
  const row = document.createElement("tr");
  row.innerHTML = `<td>${user.name}</td><td>${user.status}</td><td>${user.points}</td>`;
  tbody.appendChild(row);
});
</script>

{% endblock %}
